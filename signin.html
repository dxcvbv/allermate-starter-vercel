<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sign In — AllerMate</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>

<header class="topbar">
  <div class="brand"><a href="index.html">AllerMate</a></div>
  <nav class="topnav" aria-label="Primary">
    <a href="index.html">Home</a>
    <a href="search.html">Search</a>
    <a href="account.html">Account</a>
    <a href="history.html">History</a>
    <a href="signin.html">Sign In</a>
  </nav>
</header>

<!-- Mobile bottom tabs -->
<nav class="tabbar" aria-label="Bottom navigation">
  <a href="index.html">Home</a>
  <a href="search.html">Search</a>
  <a href="account.html">Account</a>
  <a href="history.html">History</a>
</nav>

<div class="container">
  <aside class="sidebar" aria-label="Sidebar">
    <a href="index.html" class="item">Home</a>
    <a href="welcome.html" class="item">Welcome</a>
    <a href="search.html" class="item">Search</a>
    <a href="account.html" class="item">Account</a>
    <a href="history.html" class="item">History</a>
    <a href="signin.html" class="item">Sign In</a>
  </aside>
  <main class="main">


<section class="card" style="max-width:560px;margin-inline:auto">
  <h1>Sign In</h1>
  <form id="auth" autocomplete="on">
    <div class="grid">
      <label for="email">Email</label>
      <input class="input" id="email" type="email" required placeholder="you@example.com" autocomplete="email"/>
      <label for="password">Password</label>
      <input class="input" id="password" type="password" required autocomplete="current-password"/>
    </div>
    <div class="navrow" style="margin-top:12px">
      <button class="button" type="submit">Continue</button>
    </div>
    <p class="muted" style="margin-top:8px">Don’t have an account? Enter email & password and we’ll create one.</p>
  </form>
</section>
<div class="navrow" style="margin-top:14px">
  <a class="button secondary" href="index.html">← Back to Home</a>
</div>


  </main>
</div>
<nav class="tabbar" aria-label="Bottom navigation">
  <a href="index.html">Home</a>
  <a href="search.html">Search</a>
  <a href="account.html">Account</a>
  <a href="history.html">History</a>
</nav>

<div class="toast" role="status" aria-live="polite"></div>

<!-- Supabase project keys -->
<script>
  window.SUPABASE_URL = 'https://iabawpqxcoxfstyaufui.supabase.co';
  window.SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYmF3cHF4Y294ZnN0eWF1ZnVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMjA3ODMsImV4cCI6MjA3NzY5Njc4M30.6jPNWec0EZMawGRFa9Jz2nehztHIFVvwER8Ljh-HK9g';
</script>
<script type="module" src="/js/supa.js"></script>
<script type="module" src="/js/ui.js"></script>


<script type="module">
  import { signInOrSignUp } from '/js/supa.js';
  import { toast } from '/js/ui.js';
  const $ = s => document.querySelector(s);
  const form = $('#auth');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = $('#email').value.trim();
    const password = $('#password').value;
    try {
      const { error } = await signInOrSignUp(email, password);
      if (error) { toast(error.message || 'Authentication error'); return; }
      location.href = 'account.html';
    } catch { toast('Network error'); }
  });
</script>

</body>
</html>
